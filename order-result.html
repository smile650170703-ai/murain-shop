<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MURAIN â€” è¨‚å–®çµæœ (v6.1)</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 2rem auto; max-width: 600px; padding: 1rem; background-color: #f9f9f9; text-align: center; }
        .container { background: #fff; border-radius: 8px; padding: 2rem; }
        h1 { color: #28a745; }
        .error { color: #dc3545; }
    </style>
</head>
<body>
    <div class="container" id="result-container">
        </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const container = document.getElementById('result-container');

        function showResult() {
            const order_id = urlParams.get('order_id');
            const status = urlParams.get('status');
            const pmt_status = urlParams.get('Status'); // PAYUNi/L IN G UAGE
            
            // (v6.1) Q5: é‡‘æµä»˜æ¬¾æˆåŠŸ
            if (pmt_status === 'SUCCESS' || status === 'awaiting_shipping_info') {
                container.innerHTML = `
                    <h1>ğŸ‰ ä»˜æ¬¾æˆåŠŸ</h1>
                    <p>æ‚¨çš„è¨‚å–®å·²ä»˜æ¬¾å®Œæˆï¼</p>
                    <p>è¨‚å–®ç·¨è™Ÿï¼š<strong>${order_id || urlParams.get('MerTradeNo') || 'N/A'}</strong></p>
                    <p style="font-weight: bold; color: #007aff;">
                        æ¥ä¸‹ä¾†ï¼Œè«‹é»æ“Šä¸‹æ–¹é€£çµï¼Œå®Œæˆã€Œæ”¶ä»¶è³‡è¨Šã€çš„å¡«å¯«ã€‚
                    </p>
                    <a href="shipping.html?cart_token=${urlParams.get('TradeNo') || ''}&method=PAID" style="font-size: 1.2rem;">
                        é»æˆ‘å‰å¾€å¡«å¯«ç‰©æµ
                    </a>
                `;
            } 
            // (v6.1) Q1: éŠ€è¡ŒåŒ¯æ¬¾
            else if (status === 'awaiting_payment') {
                container.innerHTML = `
                    <h1>â³ ç­‰å¾…åŒ¯æ¬¾</h1>
                    <p>æ‚¨çš„è¨‚å–®å·²å»ºç«‹ï¼Œæ­£åœ¨ç­‰å¾…åŒ¯æ¬¾ã€‚</p>
                    <p>è¨‚å–®ç·¨è™Ÿï¼š<strong>${order_id}</strong></p>
                    <p>è«‹å‰å¾€ã€Œçµå¸³é é¢ã€æŸ¥çœ‹åŒ¯æ¬¾è³‡è¨Šï¼Œæˆ–é»æ“Šä¸‹æ–¹æŒ‰éˆ•è¿”å›çµå¸³é ã€‚</p>
                    <a href="checkout.html?cart_token=${urlParams.get('cart_token') || ''}">è¿”å›çµå¸³é </a>
                `;
            } 
            // (v6.1) Q5: è²¨ä»˜/è¨‚é‡‘å–® æäº¤ç‰©æµå¾Œ
            else if (status === 'awaiting_cod_shipment' || status === 'awaiting_deposit_proof') {
                 container.innerHTML = `
                    <h1>ğŸ‘ è¨‚å–®å·²ç¢ºèª</h1>
                    <p>æ‚¨çš„è¨‚å–®è³‡æ–™å·²é€å‡º (è²¨åˆ°ä»˜æ¬¾/è¨‚é‡‘)ï¼Œæˆ‘å€‘å°‡ç›¡å¿«ç‚ºæ‚¨è™•ç†ã€‚</p>
                    <p>è¨‚å–®ç·¨è™Ÿï¼š<strong>${order_id}</strong></p>
                `;
            } 
            // (v6.1) é‡‘æµä»˜æ¬¾å¤±æ•—
            else if (pmt_status === 'FAIL') {
                container.innerHTML = `
                    <h1 class="error">ä»˜æ¬¾å¤±æ•—</h1>
                    <p>è¨‚å–®ç·¨è™Ÿï¼š<strong>${order_id || urlParams.get('MerTradeNo') || 'N/A'}</strong></p>
                    <p>è¨Šæ¯ï¼š${urlParams.get('Message') || 'é‡‘æµç³»çµ±æœªæä¾›éŒ¯èª¤è¨Šæ¯'}</p>
                    <a href="checkout.html?cart_token=${urlParams.get('TradeNo') || ''}">è¿”å›çµå¸³é </a>
                `;
            } 
            // (v6.1) Q5: åŒ¯æ¬¾å¾Œæäº¤ç‰©æµ
            else if (status === 'paid') {
                 container.innerHTML = `
                    <h1>ğŸ‘ è¨‚å–®å·²ç¢ºèª</h1>
                    <p>æ‚¨çš„è¨‚å–®è³‡æ–™ (å·²ä»˜æ¬¾) å·²é€å‡ºï¼Œæˆ‘å€‘å°‡ç›¡å¿«ç‚ºæ‚¨è™•ç†ã€‚</p>
                    <p>è¨‚å–®ç·¨è™Ÿï¼š<strong>${order_id}</strong></p>
                `;
            }
            else {
                container.innerHTML = `
                    <h1 class="error">æŸ¥è©¢çµæœ</h1>
                    <p>è¨‚å–®ç·¨è™Ÿï¼š<strong>${order_id || 'N/A'}</strong></p>
                    <p>ç‹€æ…‹ï¼š<strong>${status || pmt_status || 'æœªçŸ¥'}</strong></p>
                `;
            }
        }
        
        showResult();
    </script>
</body>
</html>