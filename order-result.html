<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Order completed — 訂單完成</title>
<style>
  *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Noto Sans TC",Roboto}
  body{margin:0;background:#020617;color:#e2e8f0}
  .wrap{max-width:720px;margin:0 auto;padding:24px 16px 40px}
  h1{margin:0 0 12px;font-size:22px}
  .card{background:rgba(15,23,42,.96);border:1px solid rgba(148,163,184,.35);border-radius:18px;padding:18px;box-shadow:0 18px 45px rgba(0,0,0,.65);margin-top:12px}
  .muted{font-size:13px;color:#94a3b8;margin-top:4px}
  .highlight{font-size:18px;font-weight:600;margin:8px 0}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:14px}
  .btn{margin-top:16px;width:100%;padding:12px 14px;border-radius:999px;border:none;background:#e2e8f0;color:#020617;font-size:15px;font-weight:600}
  .btn.secondary{background:transparent;color:#e2e8f0;border:1px solid rgba(148,163,184,.7)}
  .section-title{font-size:14px;font-weight:600;margin-top:12px;margin-bottom:4px}
</style>
</head>
<body>
<div class="wrap">
  <h1>訂單已送出</h1>
  <div class="card">
    <div id="okBlock">
      <div>感謝您的訂購，系統已收到訂單。</div>
      <div class="highlight mono" id="orderLine">訂單編號：—</div>
      <div class="muted" id="amountLine">訂單金額：—</div>

      <div class="section-title">提醒您</div>
      <div class="muted">
        請先截圖或記下上方的訂單編號，<br />
        若您有任何問題或需更改收件資訊，歡迎私訊 官方 LINE 客服，我們會盡快為您處理。
      </div>
    </div>

    <div id="errorBlock" style="display:none;">
      <div class="highlight">找不到訂單編號</div>
      <div class="muted">
        無法從網址中取得訂單資訊，可能是：
        <ul>
          <li>網址被修改或遺失參數</li>
          <li>頁面停留時間過久重新整理造成</li>
        </ul>
        請回到上一頁重新下單，或私訊客服協助處理。
      </div>
    </div>
<button class="btn" id="backLineBtn">回到官方 LINE</button>
  </div>

  <div class="muted" style="margin-top:10px;font-size:12px;">
    出貨時間為週一至週五，週末下單將順延至工作日出貨。。
  </div>
</div>

<script>
  const qs = new URLSearchParams(location.search);
  const orderId = qs.get('order_id') || '';
  const total = qs.get('total') || '';

  const orderLine = document.getElementById('orderLine');
  const amountLine = document.getElementById('amountLine');
  const okBlock = document.getElementById('okBlock');
  const errorBlock = document.getElementById('errorBlock');

    if (orderId) {
    // 有帶 order_id：照原本邏輯顯示訂單資訊（購物車 / 匯款等）
    orderLine.textContent = '訂單編號：' + orderId;
    if (total) {
      const n = Number(total) || 0;
      amountLine.textContent = '訂單金額：NT$ ' + n.toLocaleString();
    } else {
      amountLine.textContent = '訂單金額：依實際訂單為準';
    }
  } else {
    // 沒有帶 order_id：多半是 PayUNI 金流回來的情況
    // → 不當成錯誤，用一般完成文案 + 提醒以 LINE / 訂單明細為主
    okBlock.style.display = 'block';
    errorBlock.style.display = 'none';

    orderLine.textContent = '訂單編號：請以 LINE 通知與訂單明細為準';
    amountLine.textContent = '訂單金額：依金流頁面與訂單明細為準';
  }

   // 回到官方 LINE 按鈕
  const lineBtn = document.getElementById('backLineBtn');
  if (lineBtn) {
    // 把 @你的ID 換成你官方帳號的 ID（例如 @murain123）
    const lineUrl = 'https://line.me/R/ti/p/@cc0857';

    lineBtn.addEventListener('click', () => {
      location.href = lineUrl;
    });

    // 如果你想「結單幾秒後自動跳回 LINE」，可以把下面這行註解打開：
     setTimeout(() => { location.href = lineUrl; }, 4000);
  }

</script>
</body>
</html>
