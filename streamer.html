<!DOCTYPE html>
<html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>MURAIN — 主播開單（兩鍵版）</title>
<style>body{font-family:system-ui,'Noto Sans TC',sans-serif;margin:0;background:#f3f5f7}.wrap{max-width:560px;margin:0 auto;padding:1rem}.box{background:#fff;border-radius:12px;padding:14px;box-shadow:0 4px 10px rgba(0,0,0,.06)}input{width:100%;padding:12px;border:1px solid #ddd;border-radius:10px}.row{display:flex;gap:10px;margin-top:10px}button{flex:1;padding:14px;border:0;border-radius:12px;font-size:1rem;cursor:pointer}.btn-dark{background:#111;color:#fff}.btn-outline{background:#fff;color:#111;border:1px solid #ddd}.muted{color:#666;font-size:.9rem}.out{margin-top:12px}.link{word-break:break-all}.hint{background:#f6f7fb;border:1px dashed #ccc;padding:8px;border-radius:10px;margin-top:10px}</style>
<!-- <script>window.API_BASE="https://api.murain.tw"</script> -->
</head>
<body><div class="wrap"><div class="box"><div class="muted">請輸入主播名稱（必填）</div><input id="s_name" placeholder="例如：妹妹、小A、主持人01" />
<div class="hint muted">選一種付款流程發給客人：</div><div class="row"><button class="btn-dark" id="btn-new">新客匯款</button><button class="btn-outline" id="btn-mix">老客 7-11 COD / 其他金流</button></div>
<div class="out" id="out" style="display:none;"><div class="muted" style="margin-top:10px;">把下面連結貼給客人（LINE / 抖音私訊）</div><div class="link" id="url"></div><div style="text-align:center;margin-top:8px;"><img id="qr" alt="QR" /></div></div></div></div>
<script>
const API=(window.API_BASE||'').replace(/\/$/,'')||'';
async function post(u,d){const r=await fetch(API+u,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(d||{})});return r.json();}
async function make(flow){const streamer_name=(document.getElementById('s_name').value||'').trim();if(!streamer_name){alert('請先輸入主播名稱');return;}const r=await post('/cart/create',{streamer_name,customer_type:'live'});if(r.cart_token){const u=(r.share_url||(location.origin+'/checkout.html?cart_token='+r.cart_token))+'&flow='+encodeURIComponent(flow);document.getElementById('url').innerText=u;const q='https://chart.googleapis.com/chart?chs=240x240&cht=qr&chl='+encodeURIComponent(u);document.getElementById('qr').src=q;document.getElementById('out').style.display='block';}else{alert(r.error||'發生錯誤');}}
document.getElementById('btn-new').addEventListener('click',()=>make('new'));
document.getElementById('btn-mix').addEventListener('click',()=>make('mix'));
</script></body></html>
